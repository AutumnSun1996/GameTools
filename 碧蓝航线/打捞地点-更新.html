<h1>
  <a href="http://wiki.joyme.com/blhx/%E7%A2%A7%E8%93%9D%E8%88%AA%E7%BA%BF%E5%85%A8%E5%9C%B0%E5%9B%BE%E7%BB%83%E7%BA%A7%E5%92%8C%E5%9B%BE%E7%BA%B8%E8%88%B0%E5%A8%98%E6%89%93%E6%8D%9E%E6%8E%A8%E8%8D%90%E5%BA%A6%E8%AF%A6%E8%A1%A8"
    target="_blank">
    碧蓝航线全地图练级和图纸舰娘打捞推荐度详表
  </a>
</h1>
<p>已拥有的舰娘: </p>
<pre id="ship">
    #后排主力:
    #维修:
    #航母: 列克星敦 齐柏林 蛟（苍龙） 约克城
    #轻航: 突击者 长岛 兰利 竞技神 鹞（祥凤） 博格 
    #战列/战巡: 罗德尼 纳尔逊 宾夕法尼亚 反击 声望 内华达 田纳西 加利福尼亚 俄克拉荷马 亚利桑那
    #重炮: 黑暗界 恐怖
    
    #前排先锋:
    #重巡: 波特兰 希佩尔 印第安纳波利斯 什罗普郡 肯特 北安普敦 伦敦 芝加哥 萨福克 德意志 
    #轻巡: 圣地亚哥 菲尼克斯 利安得 布鲁克林 阿贾克斯 蒙彼利埃 海伦娜 克利夫兰
    #驱逐:
    Z46 
    拉菲 标枪 吸血鬼 
    Z23 Z25 Z35 
    格里德利 撒切尔 西姆斯 哈曼 女将 命运女神 天后 萩（阳炎） ？ ？ Z19 弗莱彻
    卡辛 唐斯 克雷文 麦考尔 奥利克 富特 斯彭斯 小猎兔犬 大斗犬 彗星 新月 小天鹅 狐提 Z20
    #潜艇:
    U-47 伊58
</pre>
<p>已够用的装备: </p>
<pre id="equipment">
   
</pre>
<p>由
  <a href="http://wiki.joyme.com/home/index.php?title=%E7%89%B9%E6%AE%8A:%E7%9D%80%E8%BF%B7%E8%B4%A1%E7%8C%AE&userid=5729780"
    target="_blank">井号5467</a> 原创</p>
<style>
  table,
  th,
  td {
    border: 1px solid;
  }

  th {
    height: 1em;
  }

  table {
    width: 90%;
    margin: auto;
    text-align: center;
    border-collapse: collapse;
  }

  .del {
    text-decoration: line-through;
    color: gray;
  }
</style>


<table>
  <thead>
    <tr>
      <th>地图</th>
      <th>强度舰娘</th>
      <th>收藏向舰娘</th>
      <th>萌新向装备图纸</th>
      <th>推荐度(满分10)</th>
      <th>备注</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2-2</td>
      <td>布鲁克林</td>
      <td></td>
      <td>液压舵机，海军迷彩</td>
      <td>0.5</td>
      <td>海军迷彩和陀机这个东西适合重巡用，萌新重巡能用的应该是波特兰改，波特兰改好了以后带小海狸、金SG打PVE都替代了海军迷彩和陀机，所以。。挺尴尬的定位，我个人不推荐，开箱出一两个就足够用到毕业了。(除非重巡崛起)</td>
    </tr>
    <tr>
      <td>2-3</td>
      <td>纳尔逊，鹞</td>
      <td></td>
      <td>灭火器</td>
      <td>4.5</td>
      <td>灭火器很好,灭火器己经成为目前10图和9图攻略的主力,10图又名灭火航线,(11.19更新灭火器 bug修复,一战封祌)灭火器的重要性等于顶级金装,高于一般金装,建议捞出一两个灭火器和一两个重要舰娘再离开2-3.</td>
    </tr>
    <tr>
      <td>2-4</td>
      <td>列克星敦，鹞，罗德尼</td>
      <td></td>
      <td></td>
      <td>1</td>
      <td>舰娘在其他地图都有替代,减分</td>
    </tr>
    <tr>
      <td>3-2</td>
      <td></td>
      <td></td>
      <td>127单装，SB2C轰炸机，(紫液压)</td>
      <td>4</td>
      <td>版本第一轰炸机；紫油箱中后期开始逐步全面消除紫液压，所以液压这里当做副产物就好，不用专门捞；基本紫油箱1：1紫轰炸出货，对于中期足够了，后期紫液压有两个上位替代。中期有个叫7-2的图，会让你紫液压捞到爆炸的。前期别为液压刷3-2</td>
    </tr>
    <tr>
      <td>3-4</td>
      <td>赤城、加贺，波特兰</td>
      <td>赤城、加贺</td>
      <td>维修工具，F4U海盗</td>
      <td>7</td>
      <td>第一撑血工具，紫色最强战斗机</td>
    </tr>
    <tr>
      <td>4-1</td>
      <td>萨拉托加，波特兰，菲尼克斯，布鲁克林</td>
      <td></td>
      <td>挡雷板</td>
      <td>3</td>
      <td>都有重复替代的地图</td>
    </tr>
    <tr>
      <td>4-2</td>
      <td></td>
      <td></td>
      <td>克爹炮(150)，三联152</td>
      <td>5</td>
      <td>克爹炮和三联152开包易得,有趣的是克爹炮作为主炮和152三联作为战列副炮均可以被152双联可替代。驱逐炮不错。目前可捞最好紫高爆重巡炮。</td>
    </tr>
    <tr>
      <td>4-3</td>
      <td>波特兰，黑暗界，恐怖</td>
      <td></td>
      <td>双联152</td>
      <td>4</td>
      <td>武器上，就是上面说的替代，就是这个。黑暗界和恐怖可以作为低耗后排使用，当你开始决定低耗的时候再来捞</td>
    </tr>
    <tr>
      <td>4-4</td>
      <td>独角兽，克利夫兰，菲尼克斯</td>
      <td></td>
      <td>紫欧根(203SCK)</td>
      <td>4</td>
      <td>独角兽克爹很重要，紫欧根前期替代金欧根</td>
    </tr>
    <tr>
      <td>5-1</td>
      <td>海伦娜，布鲁克林，菲尼克斯</td>
      <td>妙高</td>
      <td>金高平</td>
      <td>4</td>
      <td>海妈第一个出现点，妙高在活动本出货率挺高</td>
    </tr>
    <tr>
      <td>5-2</td>
      <td>伊丽莎白</td>
      <td></td>
      <td>地狱猫</td>
      <td>4</td>
      <td>版本优质战斗机</td>
    </tr>
    <tr>
      <td>5-3</td>
      <td>克利夫兰</td>
      <td></td>
      <td>BTD，航空副油箱</td>
      <td>5</td>
      <td>油箱加分，版本第一金轰炸(不是第一轰炸)</td>
    </tr>
    <tr>
      <td>5-4</td>
      <td>罗德尼，纳尔逊，菲尼克斯，布鲁克林，波特兰，独角兽</td>
      <td></td>
      <td>金博福斯，紫博福斯，紫天山</td>
      <td>7.5</td>
      <td>好用舰娘大集中，版本优秀防空炮，版本优秀鱼雷机(有紫菜的话，可以打10分)</td>
    </tr>
    <tr>
      <td>6-1</td>
      <td>海伦娜，女灶神</td>
      <td>雷、电</td>
      <td>金SG</td>
      <td>4.5</td>
      <td>女灶神第一出现点，SG有一两个很重要，不必要多刷。</td>
    </tr>
    <tr>
      <td>6-2</td>
      <td></td>
      <td></td>
      <td>贝爷炮，MK6，mk5</td>
      <td>7</td>
      <td>双问号点，低难度(加分)值得刷且有紫菜的第一张图，版本第一轻巡高爆，版本输出最高战列炮</td>
    </tr>
    <tr>
      <td>6-3</td>
      <td>亚利桑那</td>
      <td>电</td>
      <td>弹链，mk6，410，mk5</td>
      <td>6.5</td>
      <td>弹链配合三门可用的战列炮，金图纸和亚利桑那算副产物</td>
    </tr>
    <tr>
      <td>6-4</td>
      <td>夕立，萨拉托加，列克星敦</td>
      <td>夕立</td>
      <td>四联610</td>
      <td>6</td>
      <td>要五战(你不是6图！)版本第一手操鱼雷，其实poi对萌新帮助不大，萌新期不用强求</td>
    </tr>
    <tr>
      <td>7-1</td>
      <td>伊丽莎白女王</td>
      <td></td>
      <td>八连碰碰</td>
      <td>2</td>
      <td>补给点少，不再是最强的防空炮，反人类的道中道路设计，不推荐</td>
    </tr>
    <tr>
      <td>7-2</td>
      <td></td>
      <td>雷、电</td>
      <td>金113，紫113，紫梭鱼</td>
      <td>9</td>
      <td>四个问号点，boss点固定，版本第一防空，第一紫防空，紫梭鱼伤害在所有鱼雷机仅次于金梭鱼(萌新可用)，如果有好用舰娘，可以打10分</td>
    </tr>
    <tr>
      <td>7-3</td>
      <td>女灶神</td>
      <td>五十铃</td>
      <td>金欧根，410连装</td>
      <td>8.5</td>
      <td>四个问号点版本第一重巡炮，可用战列炮，boss点不固定，但是4个补给点</td>
    </tr>
    <tr>
      <td>7-4</td>
      <td></td>
      <td>凤翔(凤)</td>
      <td>金五533，鱼雷板</td>
      <td>4</td>
      <td>金五联以后满仓(所有金箱子出)，鱼雷板后期开箱足够</td>
    </tr>
    <tr>
      <td>8-1</td>
      <td></td>
      <td>电、阿武隈</td>
      <td>金高平，120mm双联</td>
      <td>5</td>
      <td>好用的驱逐炮,8图开始4战。8-1道路类似7-1反人类,减分,但是 是金高平和紫菜并存的唯二地点之一,另一个在10-3。
      </td>
    </tr>
    <tr>
      <td>8-2</td>
      <td></td>
      <td>雷，阿武隈</td>
      <td>金四联610</td>
      <td>4.5</td>
      <td>没啥好用的。只有一个补给点，尴尬。考虑到大部分人刷出610四连在6-4，减分比较多。</td>
    </tr>
    <tr>
      <td>8-3</td>
      <td></td>
      <td>那智，阿武隈</td>
      <td>贝爷炮，203连装</td>
      <td>5</td>
      <td>双问号点，贝爷炮加分，但是贝爷炮在之前有紫菜的重复点，略减分。</td>
    </tr>
    <tr>
      <td>8-4</td>
      <td></td>
      <td>摩耶，那智，里士满</td>
      <td>欧根炮，203连装</td>
      <td>8</td>
      <td>双问号点，收藏向加分，捞出收藏基本就捞出欧根了</td>
    </tr>
    <tr>
      <td>9-1</td>
      <td></td>
      <td></td>
      <td>105skc 防空炮</td>
      <td>2</td>
      <td>9图开始5战，全地图出里士满(8-4捞的人心痛！)，且敌人难度提高，优秀金防空，但是没有别的可以捞，2分给金防空</td>
    </tr>
    <tr>
      <td>9-2</td>
      <td></td>
      <td>拉德福特，金杰斯</td>
      <td>(金维修)</td>
      <td>2</td>
      <td>两分给收藏，出来就变0分</td>
    </tr>
    <tr>
      <td>9-3</td>
      <td></td>
      <td>尼古拉斯</td>
      <td>克爹炮，052</td>
      <td>2</td>
      <td>捞到这里都不缺克爹炮了，对于052金耻也肯定不在意了</td>
    </tr>
    <tr>
      <td>9-4</td>
      <td></td>
      <td>新月JP</td>
      <td>秋月炮</td>
      <td>3</td>
      <td>目前最难地图，收藏向值得捞，但是秋月炮等藏王箱子开也可以，专门为秋月炮来捞不值</td>
    </tr>
  </tbody>
</table>
<script>

  function get_set(item) {
    if (item.innerText == "") {
      return [];
    }
    return item.innerText.replace(/[，,]/g, " ").replace(/[\s\r\n（）、]+/g, " ").trim().split(" ");
  }

  function intersect(here, own, addLink) {
    var common = new Set();
    for (var ih in here) {
      var href = here[ih];
      for (var io in own) {
        if (here[ih] == own[io]) {
          common.add(own[io]);
          here[ih] = '<span class="del">' + here[ih] + "</span>";
          break;
        }
      }
      if (addLink) {
        here[ih] = '<a href="http://wiki.joyme.com/blhx/' + href + '" target="_blank">' + here[ih] + "</a>";
      }
    }
    return [...common];
  }

  function union(a, b) {
    for (var i of b) {
      a.push(b);
    }
    return [...new Set(a)];
  }

  function commonCount(item_here, own, addLink) {
    var want_here = get_set(item_here);
    var common = intersect(want_here, own, addLink);
    console.log("Update", item_here, want_here);
    item_here.innerHTML = want_here.join(", ");
    return common;
  }

  function updateItems(item_list, target) {

  }

  var ship_own = get_set(document.getElementById("ship"));
  var equipment_own = get_set(document.getElementById("equipment"));

  console.log(ship_own, equipment_own);
  var items = document.getElementsByTagName("tr");
  for (var i = 1; i < items.length; i++) {
    var item = items[i];
    console.log(item);
    item.children[0].innerHTML = '<a href="http://wiki.joyme.com/blhx/' + item.children[0].innerHTML + '" target="_blank">' + item.children[0].innerHTML + '</a>';
    var commmonShip1 = commonCount(item.children[1], ship_own, true);
    var commmonShip2 = commonCount(item.children[2], ship_own, true);
    var commmonShip = union(commmonShip1, commmonShip2).length;
    var commmonEquipment = commonCount(item.children[3], equipment_own, false).length; //装备基本使用了简称，不添加链接

    console.log(commmonShip1, commmonShip2, commmonShip, commmonEquipment)

    var ownCount = commmonShip + commmonEquipment;
    if (ownCount > 0) {
      var originalCount = union(get_set(item.children[1]), get_set(item.children[2])).length + get_set(item.children[3]).length;
      var originalScore = parseFloat(item.children[4].innerText);
      var newScore = parseInt(10 * originalScore * (originalCount - ownCount) / originalCount) / 10;
      newScore = newScore > 0 ? newScore : 0;
      item.children[4].innerHTML = newScore + '<span class="del">(' + originalScore + ")</span>";
    }
  }
</script>